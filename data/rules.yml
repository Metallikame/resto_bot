version: "3.1"

rules:

# 1. Répondre à une salutation
- rule: répondre à une salutation
  steps:
    - intent: salutation
    - action: utter_salutation

# 2. Répondre à une demande d'au revoir
- rule: répondre à un au revoir
  steps:
    - intent: au_revoir
    - action: utter_au_revoir

# 3. Répondre au bot challenge
- rule: répondre au bot challenge
  steps:
    - intent: bot_challenge
    - action: utter_bot_challenge

# 4. Donner le menu du jour (seulement si au début)
- rule: donner le menu du jour
  steps:
    - intent: menu_jour
    - action: utter_menu_jour

# 5. Donner la liste des allergènes (seulement si au début)
- rule: donner la liste des allergènes
  steps:
    - intent: allergenes
    - action: utter_allergenes

# 6. Si quelqu'un essaie d'interrompre pendant une action de réservation
- rule: empêcher interruption
  condition:
    - active_loop: reservation_form
  steps:
    - intent: menu_jour
    - action: utter_interruption_refusee
  wait_for_user_input: false

- rule: empêcher interruption allergènes
  condition:
    - active_loop: reservation_form
  steps:
    - intent: allergenes
    - action: utter_interruption_refusee
  wait_for_user_input: false

# 7. Code de réservation incorrect
- rule: code incorrect
  steps:
    - intent: donner_code
    - action: action_verifier_code
